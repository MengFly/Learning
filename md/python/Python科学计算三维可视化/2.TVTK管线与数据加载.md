## 2.TVTK管线与数据加载
[TOC]

### TVTK管线
+ 可视化管线
 通过可视化管线将数据加工为图形数据
 图形数据的加工
 - TVTK对象
   + CubeSource（通过计算机输出一组描述长方体的数据）
   + PolyDataMapper（将数据映射为图形数据）

+ 图形管线
 将数据显示出来
 - TVTK对象
  + Actor 场景中的一个实体，包括一个图形数据，具有描述该实体的位置，方向，大小的属性
   + Renderer 渲染的场景。它包括多个需要渲染的Actor
   + RenderWindow 渲染用的图形窗口，它包括一个或者多个Render。
   + RenderWindowInteractor 给图形窗口提供一些用户交互功能例如平移、旋转、放大缩小。这些交互式操作并不改变Actor或者图形数据的属性，只是调整场景中的照相机(Camera)的一些设置


### 用IVTK工具观察管线

```python
from tvtk.api import tvtk
from tvtk.tools import ivtk
from pyface.api import GUI
 
s = tvtk.CubeSource(x_length=1.0, y_length=2.0, z_length=3.0)
m = tvtk.PolyDataMapper(input_connection=s.output_port)
a = tvtk.Actor(mapper=m)
 
#创建一个带Crust（Python Shell）的窗口
gui = GUI()
win = ivtk.IVTKWithCrustAndBrowser()
win.open()
win.scene.add_actor(a)

#修正窗口错误
dialog = win.control.centralWidget().widget(0).widget(0)
from pyface.qt import QtCore
dialog.setWindowFlags(QtCore.Qt.WindowFlags(0x00000000))
dialog.show()
 
gui.start_event_loop()
```

### TVTK数据集
数据集
点（Point）和数据（Data）
点之间（连接和非连接）
对个相关的点主城单元
点的连接：显示和隐式
数据：标量和矢量

#### ImageData
ImageData表示二维或三维图像的数据结构。

+ 构建ImageData数据集

```python
from tvtk.api import tvtk
img = tvtk.ImageData(spacing=(1,1,1), origin=(1,2,3), dimensions=(3,4,5))
# 打印点的坐标
for n in range(6):
	print ("%.1f, %.1f, %.1f" % img.get_point(n))
```

#### RectilinearGrid
RectilinearGrid:间距不均匀的网格，所有点都在正交的网格上。

+ 构建RectilinearGrid数据集

```python
from tvtk.api import tvtk
import numpy as np
x = np.array([0,3,9,15])
y = np.array([0,1,5])
z = np.array([0,2,3])
r = tvtk.RectilinearGrid()
r.x_coordinates = x
r.y_coordinates = y
r.z_coordinates = z
r.dimensions = len(x),len(y),len(z)
```

#### StructuredGrid
StructuredGrid:创建任意形状的网格，需要指定点的坐标。

####  Polydata
由一系列的点、点之间的联系以及由点构成的多边形组成。

### 数据加载
s=tvtk.STLReader(file_name = “stl文件名”)

```python
Plot3d = tvtk.MultiBlockPLOT3DReader(
xyz_file_name=“combxyz.bin”, #网格文件
q_file_name=“combq.bin”, #空气动力学结果文件
scalar_function_number=100, #设置标量数据数量
vector_function_number=200 #设置矢量数据数量
)

```


