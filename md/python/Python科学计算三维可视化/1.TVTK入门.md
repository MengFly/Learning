## 课程导学-TVTK库

[TOC]

+ 如何创建三维数据源
+ 加载数据源
+ 对其进行三维可视化
+ TVTK库管线

+ 三个实例
 - 矢量数据的三维可视化
 - 标量数据的三维可视化
 - 空间数据轮廓线的三维可视化

### 科学计算的可视化主要方法
1.二维标量数据场
 - 颜色映射法
 - 等值线方法
 - 立体图法、层次分割法

2.三维标量数据场
 - 面绘制法
 - 体绘制法

3.矢量数据场
 - 直接法
 - 流线法


### TVKT 库安装
VTK库的封装
+ VTK官网
 http://code.enthought.com/projects/mayavi

+ 运行环境
 Python3.6
 VTK-7.1.1-cp36-cp36m-win_amd64.whl
 http://www.lfd.uci.edu/~gohlke/pythonlibs/vu4hx7yr/VTK-7.1.1-cp36-cp36m-win_amd64.whl
 numpy-1.12.1+mkl-cp36-cp36m-win_amd64.whl
 http://www.lfd.uci.edu/~gohlke/pythonlibs/vu4hx7yr/numpy-1.11.3+mkl-cp36-cp36m-win_amd64.whl
 traits-4.6.0-cp36-cp36m-win_amd64.whl
 http://www.lfd.uci.edu/~gohlke/pythonlibs/vu4hx7yr/traits-4.6.0-cp36-cp36m-win_amd64.whl
 mayavi-4.5.0+vtk71-cp36-cp36m-win_amd64.whl
 http://www.lfd.uci.edu/~gohlke/pythonlibs/vu4hx7yr/mayavi-4.5.0+vtk71-cp36-cp36m-win_amd64.whl
 PyQt4-4.11.4-cp36-cp36m-win_amd64.whl
 http://www.lfd.uci.edu/~gohlke/pythonlibs/vu4hx7yr/PyQt4-4.11.4-cp36-cp36m-win_amd64.whl

+ 安装VTK
``` shell
	pip install .....
```

+ 测试TVTK是否安装成功

``` python
# 导入相应的包
from tvtk.tools import tvtk_doc
# 打开TVTK文档查看工具
tvtk_doc.main()

#建立TVTK长方体数据源
#导入TVTK库
from tvtk.api import tvtk

#创建一个长方体对象
s = tvtk.CubeSource(x_length=1.0, y_length=2.0, z_length=3.0)

#打印这个对象内容
print(s)
```

+ TVTK 在线帮助文档
http://www.vtk.org/doc/nightly/html/annotated.html
 - TVTK库的类名去除了前缀vtk
 - 函数名按照Python惯例，采用下划线链接单词如AddItem->add_item
 - VTK对象方法用Trait属性进行替代

### 创建三维对象
```python
# 创建一个长方体对象，x方向长度为1.....
s = tvtk.CubeSource(x_length=1.0, y_length=2.0, z_length=3.0)
```

+ TVTK基本三维对象
 - CubeSource 立方体
 - ConeSource 圆锥
 - CylinderSource 圆柱体
 - AreSource 圆弧三维对象
 - ArrowSource 箭头三维对象

``` python
from tvtk.api import tvtk
# resolution 分辨率
s = tvtk.SoneSource(height=3.0, radius=1.0, resolution=36)
```

### TVTK显示三维图像
```python
from tvtk.api import tvtk

# 创建一个长方体数据源，并且同时设置其长宽高
s = tvtk.CubeSource(x_length=1.0, y_length=2.0, z_length=3.0)
# 使用PolyDataMapper将数据转换为图形数据
m = tvtk.PolyDataMapper(input_connection=s.output_port)
# 创建一个Actor
a = tvtk.Actor(mapper=m)
# 创建一个Renderer，将Actor添加进去
r = tvtk.Renderer(background=(0, 0, 0))
r.add_actor(a)
# 创建一个RenderWindow(窗口)，将Renderer添加进去
w = tvtk.RenderWindow(size=(300,300))
w.add_renderer(r)
# 创建一个RenderWindowInteractor（窗口的交互工具)
i = tvtk.RenderWindowInteractor(render_window=w)
# 开启交互
i.initialize()
i.start()
```